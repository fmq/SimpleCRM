<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:et="http://java.sun.com/jsf/composite/components"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <composite:interface>
        <composite:attribute name="id" />
        <composite:attribute name="values"/>
        <composite:attribute name="selection" default=""/>
        <composite:attribute name="selectionListener" default=""/>
        <composite:attribute name="selectionMode" default="none"/>
        <composite:attribute name="sortMode" default="none"/>
        <composite:attribute name="sortingBean" default=""/>
    </composite:interface>

    <composite:implementation>
        <et:header header="${messages.projectHeader}"/>
            <a4j:region>
                <rich:extendedDataTable id="#{cc.attrs.id}" styleClass="data-panel-table" 
                                        value="#{cc.attrs.values}" 
                                        var="project"
                                        sortMode="#{cc.attrs.sortMode}"
                                        selection="#{cc.attrs.selection}"
                                        rowClasses="table-row1,table-row2" 
                                        noDataLabel="#{messages.noDataFound}"
                                        selectionMode="#{cc.attrs.selectionMode}">
                    <c:if test="#{!empty cc.attrs.selectionListener}">
                        <a4j:ajax execute="@this" event="selectionchange" listener="#{cc.attrs.selectionListener}" />
                    </c:if>
                    <c:if test="#{!empty cc.attrs.sortingBean}">
                        <rich:column width="120px;" sortOrder="#{cc.attrs.sortingBean.projectNumberOrder}" sortBy="#{project.projectNumber}">
                            <f:facet name="header">                                            
                                <a4j:commandLink id="projectNumberOrder" value="#{messages.projectNumber}" actionListener="#{cc.attrs.sortingBean.sortAction}" render="projectTable"/>
                            </f:facet>              
                            <a4j:commandLink value="#{project.projectNumber}" action="#{dashboardBean.showDetails('PROJECT',project.id)}" render="mainTabPanel"/>
                        </rich:column>              
                        <rich:column width="200px;" sortOrder="#{cc.attrs.sortingBean.projectNameOrder}" sortBy="#{project.projectName}">
                            <f:facet name="header">                                            
                                <a4j:commandLink id="projectNameOrder" value="#{messages.projectName}" actionListener="#{cc.attrs.sortingBean.sortAction}" render="projectTable"/>
                            </f:facet>              
                            <h:outputText value="#{project.projectName}" />
                        </rich:column>              
                    </c:if>
                    <c:if test="#{empty cc.attrs.sortingBean}">
                        <rich:column width="120px;" >
                            <f:facet name="header">                                            
                                <h:outputText value="#{messages.projectNumber}"/>
                            </f:facet>              
                            <a4j:commandLink value="#{project.projectNumber}" action="#{dashboardBean.showDetails('PROJECT',project.id)}" render="mainTabPanel"/>
                        </rich:column>              
                        <rich:column width="200px;">
                            <f:facet name="header">                                            
                                <h:outputText value="#{messages.projectName}"/>
                            </f:facet>              
                            <h:outputText value="#{project.projectName}" />
                        </rich:column>              
                    </c:if>
                </rich:extendedDataTable>       
            </a4j:region>
    </composite:implementation>
</ui:composition>