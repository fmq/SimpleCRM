<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:et="http://java.sun.com/jsf/composite/components"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <composite:interface>
        <composite:attribute name="id" />
        <composite:attribute name="values"/>
        <composite:attribute name="selection" default=""/>
        <composite:attribute name="selectionListener" default=""/>
        <composite:attribute name="selectionMode" default="none"/>
        <composite:attribute name="sortMode" default="none"/>
        <composite:attribute name="sortingBean" default=""/>
    </composite:interface>

    <composite:implementation>
        <et:header header="${messages.customerHeader}"/>
            <a4j:region id="#{cc.attrs.id}Region">
                <rich:dataGrid id="#{cc.attrs.id}"   elements="5"
                                        value="#{cc.attrs.values}" 
                                        var="customer" styleClass="grids"
                                        columns="1">
                    <c:if test="#{!empty cc.attrs.selectionListener}">
                        <a4j:ajax execute="@this" event="selectionchange" listener="#{cc.attrs.selectionListener}" />
                    </c:if>
                        <rich:panel bodyClass="grid-cell" >
                          <div class="grid-4">
                              <a4j:commandLink value="#{customer.customerName}" action="#{dashboardBean.showDetails('CUSTOMER',customer.customerId)}" render="mainTabPanel"/>
                              <br></br>
                              <h:outputText value="#{customer.primaryAddress}" rendered="#{!empty customer.primaryAddress}" />
                          </div>
                          <div class="grid-4">
                              <h:outputText value="#{customer.primaryPhoneNumber}" rendered="#{!empty customer.primaryPhoneNumber}"/>
                              <br></br>
                            <h:outputText value="#{customer.primaryEmailAddress}"/>
                          </div>
                          <div class="grid-2">
                            <h:outputText value="Pipe:" class="left prompt-cell"/>
                            <h:outputText value="#{customer.pipelimeTotalAsString}" class="amount-cell left"/>
                            <br></br>
                            <h:outputText value="Fore:" class="left prompt-cell"/>
                            <h:outputText value="#{customer.forecastTotalAsString}" class="amount-cell left"/>
                          </div>
                          <div class="grid-2">
                            <h:outputText value="Fact:" class="left prompt-cell"/>
                            <h:outputText value="#{customer.pipelimeTotalAsString}" class="amount-cell left"/>
                            <br></br>
                            <h:outputText value="Pend:" class="left prompt-cell"/>
                            <h:outputText value="#{customer.forecastTotalAsString}" class="amount-cell left"/>
                          </div>
                        </rich:panel>
                    <f:facet name="footer">
                      <rich:dataScroller  renderIfSinglePage="false" />
                    </f:facet>
                </rich:dataGrid>       
            </a4j:region>   
    </composite:implementation>
</ui:composition>
